<!DOCTYPE html>

<html >
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            list-style: none;
        }
        p{
            margin: 100px 300px;
        }
        #share_weibo{
            width: 26px;
            height: 26px;
            position: absolute;
            display: none;
        }
        #share_weibo img{
            width: 26px;
            height: 26px;
        }
    </style>
</head>
<body>
<p id="word">
    XAMPP（Apache+MySQL+PHP+PERL）是一个功能强大的建站集成软件包。这个软件包原来的名字是 LAMPP，但是为了避免误解，最新的几个版本就改名为 XAMPP 了。它可以在Windows、Linux、Solaris、Mac OS X 等多种操作系统下安装使用，支持多语言：英文、简体中文、繁体中文、韩文、俄文、日文等。[1]
</p>
<div ><img id="share_weibo" src="images/weibo.png" alt=""></div>
</body>

<script src="js/myfunction.js"></script>


<script>
    window.onload = function () {


        //1.监听鼠标抬起
        var selectedText;
        $("word").onmouseup = function (event) {
            //1.0兼容
            var e = event || window.event;

            //1.1获取选中的文字

            if (window.getSelection){
                selectedText = window.getSelection().toString();

            }else {
                selectedText = document.selection.createRange().text;
            }
            //console.log(selectedText);
            $("share_weibo").style.display = "block";

            //1.3改变位置
            $("share_weibo").style.left = e.clientX + 'px';
            $("share_weibo").style.top = e.clientY + 'px';



        };
        //2.监听文档的点击
        document.onmousedown= function (event) {
            //2.0兼容
            var e = event || window.event;

            //2.1获取点击区域的id
            var targetId = e.target ? e.target.id : e.srcElement.id;
            //2.2判断
            if (targetId !== "share_weibo"){
                $("share_weibo").style.display = "none";
            }else{

                window.location.href = 'http://v.t.sina.com.cn/share/share.php?searchPic=false&title='  + selectedText + '&url=http://github.com/xuanzhihua';
            }
            //console.log(targetId);

        }



    }
</script>
</html>
